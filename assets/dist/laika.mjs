async function t(t){try{const r=t.rootId?document.querySelector(t.rootId):document.querySelector(".app");if(!r)throw new Error(`Laika: root element not found (${t.rootId??".app"})`);const a=function(t='[data-laika="payload"]'){const o=document.head.querySelector(t);if(!o)throw new Error(`Laika: payload script tag not found (${t})`);const r=o.textContent?.trim();if(!r)throw new Error("Laika: payload script tag is empty");let a;try{a=JSON.parse(r)}catch(t){throw new Error("Laika: payload JSON parse failed")}const e=a;if(!e||"object"!=typeof e)throw new Error("Laika: payload is not an object");if("string"!=typeof e.component||!e.component)throw new Error("Laika: payload.component missing");if("string"!=typeof e.url)throw new Error("Laika: payload.url missing");if(!e.props||"object"!=typeof e.props)throw new Error("Laika: payload.props missing");return e}();a.head?.title&&t.title?document.title=t.title(a.head.title):a.head?.title&&(document.title=a.head.title);const e=await t.resolve(a.component),n=(o=e,o?.default??o),i={page:()=>a,visit:async(t,o)=>{o?.replace?history.replaceState({},"",t):history.pushState({},"",t)},request:async(t,o)=>({handler:t,data:o})},p={install(t){t.provide("laika",i),t.config.globalProperties.$laika=i}};return t.setup({root:r,App:n,props:a.props,payload:a,laikaPlugin:p,laika:i})}catch(o){return t.onError?t.onError(o):console.error(o),null}var o}var o=void 0;export{t as createLaikaApp,o as default};
//# sourceMappingURL=laika.mjs.map
