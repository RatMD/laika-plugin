"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.createLaikaApp=async function(t){try{const e=t.rootId?document.querySelector(t.rootId):document.querySelector(".app");if(!e)throw new Error(`Laika: root element not found (${t.rootId??".app"})`);const r=function(t='[data-laika="payload"]'){const o=document.head.querySelector(t);if(!o)throw new Error(`Laika: payload script tag not found (${t})`);const e=o.textContent?.trim();if(!e)throw new Error("Laika: payload script tag is empty");let r;try{r=JSON.parse(e)}catch(t){throw new Error("Laika: payload JSON parse failed")}const a=r;if(!a||"object"!=typeof a)throw new Error("Laika: payload is not an object");if("string"!=typeof a.component||!a.component)throw new Error("Laika: payload.component missing");if("string"!=typeof a.url)throw new Error("Laika: payload.url missing");if(!a.props||"object"!=typeof a.props)throw new Error("Laika: payload.props missing");return a}();r.head?.title&&t.title?document.title=t.title(r.head.title):r.head?.title&&(document.title=r.head.title);const a=await t.resolve(r.component),n=(o=a,o?.default??o),i={page:()=>r,visit:async(t,o)=>{o?.replace?history.replaceState({},"",t):history.pushState({},"",t)},request:async(t,o)=>({handler:t,data:o})},p={install(t){t.provide("laika",i),t.config.globalProperties.$laika=i}};return t.setup({root:e,App:n,props:r.props,payload:r,laikaPlugin:p,laika:i})}catch(o){return t.onError?t.onError(o):console.error(o),null}var o},exports.default=void 0;
//# sourceMappingURL=laika.cjs.map
